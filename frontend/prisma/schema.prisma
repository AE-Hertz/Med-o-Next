// schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"  // Or your preferred database provider
  url      = env("DATABASE_URL")
}

model Patient {
  id             Int              @id @default(autoincrement())
  firstName      String
  lastName       String
  email          String           @unique
  phone          String
  birthDate      DateTime
  gender         String
  medicalHistories MedicalHistory[]
  appointments   Appointment[]
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
}

model Doctor {
  id             Int              @id @default(autoincrement())
  firstName      String
  lastName       String
  specialization String
  email          String           @unique
  phone          String
  appointments   Appointment[]
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
}

model MedicalHistory {
  id             Int              @id @default(autoincrement())
  description    String
  diagnosis      String
  treatment      String
  patientId      Int
  patient        Patient           @relation(fields: [patientId], references: [id])
  createdAt      DateTime          @default(now())
  updatedAt      DateTime          @updatedAt
}

model Appointment {
  id             Int              @id @default(autoincrement())
  appointmentDate DateTime
  notes          String?
  patientId      Int
  doctorId       Int
  patient        Patient           @relation(fields: [patientId], references: [id])
  doctor         Doctor            @relation(fields: [doctorId], references: [id])
  createdAt      DateTime          @default(now())
  updatedAt      DateTime          @updatedAt
}
